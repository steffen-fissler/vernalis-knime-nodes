<?xml version="1.0" encoding="utf-8"?>
<!DOCTYPE knimeNode PUBLIC "-//UNIKN//DTD KNIME Node 2.0//EN" "http://www.knime.org/Node.dtd">
<knimeNode icon="./pdb.ico" type="Source">
    <name>PDB Connector</name>
    
    <shortDescription>
        Source node to connect to RCSB PDB RESTful Web Services for advanced search and custom reporting.
    </shortDescription>
    
    <fullDescription>
        <intro><p>The <i>PDB Connector</i> source node provides connections to two RESTful Web Services for search and retrieval of information from the Protein Data Bank:
            <ul>
                <li>Advanced Search (http://www.rcsb.org/pdb/rest/search)</li>
                <li>Custom Report (http://www.rcsb.org/pdb/rest/customReport)</li>
            </ul>
        </p>
            <p>The user interface dialog options are designed to be a close mimic of the interactive web-based search and reporting options provided at
                <a href="http://www.pdb.org/pdb/search/advSearch.do">http://www.pdb.org/pdb/search/advSearch.do</a> and the user
                is encouraged to explore this resource for a full explanation of each search option.  Alternatively, use the <i>PDB Connector (XML Query 
                String)</i> node to paste an XML query directly from the "Query Details" link in the query results pages on the <a href="http://www.rcsb.org/pdb">PDB</a> page.
                The XML Query is made available as a flow variable (<i>xmlQuery</i>) after node execution.</p>
            <p>The node provides options to use either POST or GET report webservice variants.  The POST option is newer, and should be used unless machine memory is an issue 
            	(The node will download the entire report to memory).  The GET service requires multiple requests of the webservice, and URL length limits the number of hits which 
            	can be processed in each call, and the number of available report fields.  Lower values for the maximum URL length (2000-8000) will result in more calls, and fewer 
            	fields being available, but is more reliable when running through a proxy server.  Higher values should be used where possible.  Multiple calls to the GET service
            	are likely to be intercepted by the PDB server "Robot Blocker", adding further time to the query.  The GET service should be avoided wherever possible.  The node will 
            	make a number of retries at increasing delay intervals (0, 1, 5, 10, 30, 60, 300, 600 seconds) to download each block of report 
            	data during the second part of the execution (There is an additional delay, defaulting to 1 second, on each attempt, which can be adjusted by 
            	adding the line -Dknime.url.timeout= followed by a value in milliseconds - e.g. 5000 for 5 seconds to the knime.ini file).</p>
            <p>The <i>PDB Connector</i> node was developed by <a href="http://www.enspiral-discovery.com/">Enspiral Discovery</a> in collaboration with
                <a href="http://www.vernalis.com/">Vernalis (Cambridge, UK)</a>.
                For feedback and more information, please contact <a href="mailto:knime@vernalis.com">knime@vernalis.com</a>
                </p>
        </intro>
        
        <tab name="Query Options">
        	<option name="Remove Similar Sequences">Control the (optional) sequence similarity filter, used to remove similar 
        		sequences from the search hits.</option>
        	<option name="Match multiple query terms using">Control the composite query logic (individual query options can 
        		be either ANDed or ORed together)</option>
        	<option name="Ligand Image Size">Select the ligand image size to use in the generation of ligand image URLs 
        		(applies to Ligand Image field only).</option>
        	<option name="Use POST Query method (Faster)">Select the POST or GET service.  GET is older, but may limit number of report fields which can 
        		be returned, and is slower.  If using the GET option, the maximum URL length can be set</option>
        	<option name="Max. Report GET URL Length">If using the GET option, the maximum URL length can be set between 2000 and 8000.  Higher values 
        		allow more fields to be returned, and result in fewer calls to the webservice, but may fall foul of proxy servers.</option>
        	<option name="Clear Query">Clear all query options</option>
            <option name="Test Query">Test the current query, with display of xml query string and result count.  NB The 'Test' button uses 
            	the query configured in the dialog, without reference to flow variable settings.</option>
            <option name="xmlQuery string">The xml query string generated from the user settings is displayed here when the 
            	'Test' button has been pressed</option>
        </tab>
        
        <tab name="Report Options">

            <option name="Select report">Use the dropdown menu to select from a number of predefined standard reports.  Select 
            	'Customizable Table' to allow fine-grained selection of all custom report fields, using the individual and group field selectors.</option>
            <option name="Select All">Initialise a Customizable Table with all report fields.</option>
            <option name="Clear All">Initialise a Customizable Table with no report fields.</option>
        </tab>
        
        <tab name="Other query option tabs">
			<option name="Selected">To select a query option, either check the "Selected" checkbox or click anywhere on one 
			of the individual query parameters.  To unselect a query option, uncheck the "Selected" checkbox.</option>
            <option name="Value(s)">Enter values for the query term in the box(es) provided</option>
        </tab>
        
    </fullDescription>
    
    <ports>
        <outPort index="0" name="PDB IDs">One-column table of PDB IDs that match query</outPort>
        <outPort index="1" name="Custom report table">Custom report fields.</outPort>
    </ports>    
</knimeNode>
